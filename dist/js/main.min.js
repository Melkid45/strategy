$(".services-frame .item").on("click",(function(e){$(".services-frame .item").not(this).removeClass("open"),setTimeout((()=>{$(this).addClass("open")}),200)})),$(".faq-frame .item").on("click",(function(e){$(".faq-frame .item").not(this).removeClass("open"),setTimeout((()=>{$(this).addClass("open")}),200)}));const lenis=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),smoothWheel:!0,smoothTouch:!1,touchMultiplier:2,infinite:!1});function raf(e){lenis.raf(e),requestAnimationFrame(raf)}function updateMarqueeAnimation(e,t){if(!e||!e.firstElementChild)return;const n=e.firstElementChild.scrollWidth,o=e.offsetWidth,a=-(n+(parseFloat(getComputedStyle(e).gap)||0))/o*100,r=`dynamic-marquee-${t}`;let i=document.getElementById(r);i||(i=document.createElement("style"),i.id=r,document.head.appendChild(i)),i.innerHTML=`\n    @keyframes animPartners-${t} {\n      0% { \n        transform: translateX(0);\n        opacity: 1;\n      }\n      95% {\n        opacity: 1;\n      }\n      100% { \n        transform: translateX(${a}%);\n        opacity: 1;\n      }\n    }\n\n    .marquee-${t} {\n      animation: animPartners-${t} 15s linear infinite;\n      animation-fill-mode: both;\n    }\n  `,e.classList.add(`marquee-${t}`),e.style.animation="none",setTimeout((()=>{e.style.animation=""}),10)}function initMarquees(){const e=document.querySelectorAll([".stoke-title .stroke-wrap",".agency-stroke",".longest__body .stroke-wrap",".case-frame .item .item-stroke-wrap",".footer-stroke"].join(", "));let t;e.forEach(((e,t)=>{updateMarqueeAnimation(e,t),e.addEventListener("animationiteration",(function(){this.style.opacity="1"}))})),window.addEventListener("resize",(function(){clearTimeout(t),t=setTimeout((()=>{e.forEach(((e,t)=>updateMarqueeAnimation(e,t)))}),250)}))}function splitLetters(){document.querySelectorAll(".split-light, .split-dark").forEach((e=>{e.querySelectorAll("span").forEach((e=>{const t=e.textContent.split("");e.innerHTML=t.map((e=>`<span class="char">${e}</span>`)).join("")}))}))}requestAnimationFrame(raf),gsap.set(".feedback-form, .guarantees-section",{yPercent:-85,scale:.3,xPercent:-35}),gsap.to(".feedback-form",{yPercent:0,xPercent:0,scale:1,ease:"power1.inOut",scrollTrigger:{trigger:".feedback-wrap",start:"top center",end:"+=70%",scrub:1}}),gsap.to(".guarantees-section",{yPercent:0,xPercent:0,scale:1,ease:"power1.inOut",scrollTrigger:{trigger:".guarantees__wrap",start:"top center",end:"+=70%",scrub:1}}),document.addEventListener("DOMContentLoaded",(function(){setTimeout(initMarquees,500),initMarquees()})),document.addEventListener("DOMContentLoaded",(()=>{splitLetters();let e="#BEBFC3",t="#8F919A";document.querySelectorAll(".split-light, .split-dark").forEach((n=>{const o=n.querySelectorAll(".char");let a=n.classList.contains("split-light")?e:t;gsap.fromTo(o,{color:a},{color:"#fff",ease:"none",stagger:.05,scrollTrigger:{trigger:n,start:"top 80%",end:"bottom 20%",scrub:!0}})}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".item-rotate");if(!e.length)return;window.addEventListener("mousemove",(t=>{const n=window.innerWidth/2,o=15*((t.clientX-n)/n);e.forEach((e=>{gsap.to(e,{rotate:o,duration:.5,ease:"power3.out"})}))})),window.addEventListener("mouseleave",(()=>{e.forEach((e=>{gsap.to(e,{rotate:0,duration:1,ease:"power3.out"})}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("pupil"),t=e.closest("svg");if(!e||!t)return;window.addEventListener("mousemove",(n=>{const o=t.getBoundingClientRect(),a=o.left+o.width/2,r=o.top+o.height/2,i=n.clientX-a,s=n.clientY-r,c=Math.atan2(s,i),l=Math.min(8,Math.hypot(i,s)),d=60+Math.cos(c)*l,u=60+Math.sin(c)*l;gsap.to(e,{attr:{cx:d,cy:u},duration:.2,ease:"power2.out"})})),window.addEventListener("mouseleave",(()=>{gsap.to(e,{attr:{cx:60,cy:60},duration:.3,ease:"power2.out"})}))}));
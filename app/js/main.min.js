window.addEventListener("load",(function(){setTimeout((function(){ScrollTrigger.refresh(!0),console.log("ScrollTrigger refreshed")}),2e3)})),window.addEventListener("resize",(function(){setTimeout((function(){ScrollTrigger.refresh(!0)}),500)})),ScrollTrigger.normalizeScroll(!0),gsap.ticker.lagSmoothing(0),ScrollTrigger.config({limitCallbacks:!0,ignoreMobileResize:!0,autoRefreshEvents:"visibilitychange,DOMContentLoaded,load"});const lenis=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),smoothWheel:!0,smoothTouch:!1,touchMultiplier:2,infinite:!1,autoRaf:!1});function raf(t){lenis.raf(t),requestAnimationFrame(raf)}requestAnimationFrame(raf);class ScrollManager{constructor(){this.isLenisAvailable=!1,this.init()}init(){this.checkLenis(),window.addEventListener("load",(()=>{this.scrollToTop()}))}checkLenis(){return!(void 0===lenis||!lenis.scrollTo)&&(this.isLenisAvailable=!0,!0)}scrollToTop(){if(this.checkLenis())try{ScrollTrigger.getAll().forEach((t=>t.disable())),lenis.scrollTo(0,{immediate:!0,lock:!1,onComplete:()=>{this.enableScrollTriggers()}}),setTimeout((()=>{lenis.scroll>10&&lenis.scrollTo(0,{immediate:!0,onComplete:()=>this.enableScrollTriggers()})}),100)}catch(t){console.warn("Lenis scroll failed, using native scroll"),window.scrollTo(0,0),this.enableScrollTriggers()}else window.scrollTo(0,0),this.enableScrollTriggers()}enableScrollTriggers(){setTimeout((()=>{ScrollTrigger.getAll().forEach((t=>t.enable())),ScrollTrigger.refresh()}),50)}}new ScrollManager;let lastScrollTop=0,isScrollingDown=!1;const scrollThreshold=5,activationThreshold=50;lenis.on("scroll",(({scroll:t})=>{ScrollTrigger.update(),currentScroll=t;const e=document.querySelector(".header");Math.abs(currentScroll-lastScrollTop)>5&&(isScrollingDown=currentScroll>lastScrollTop,lastScrollTop=currentScroll),isScrollingDown&&currentScroll>50?e.classList.add("back"):e.classList.remove("back")}));let archorTime=!1;function updateMarqueeAnimation(t,e){if(!t||!t.firstElementChild)return;const i=t.firstElementChild.scrollWidth,s=t.offsetWidth,n=-(i+(parseFloat(getComputedStyle(t).gap)||0))/s*100,o=`dynamic-marquee-${e}`;let a=document.getElementById(o);a||(a=document.createElement("style"),a.id=o,document.head.appendChild(a)),a.innerHTML=`\n    @keyframes animPartners-${e} {\n      0% { \n        transform: translateX(0);\n        opacity: 1;\n      }\n      95% {\n        opacity: 1;\n      }\n      100% { \n        transform: translateX(${n}%);\n        opacity: 1;\n      }\n    }\n\n    .marquee-${e} {\n      animation: animPartners-${e} 15s linear infinite;\n      animation-fill-mode: both;\n    }\n  `,t.classList.add(`marquee-${e}`),t.style.animation="none",setTimeout((()=>{t.style.animation=""}),10)}function initMarquees(){const t=document.querySelectorAll([".stoke-title .stroke-wrap",".agency-stroke",".longest__body .stroke-wrap",".case-frame .item .item-stroke-wrap",".footer-stroke"].join(", "));let e;t.forEach(((t,e)=>{updateMarqueeAnimation(t,e),t.addEventListener("animationiteration",(function(){this.style.opacity="1"}))})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((()=>{t.forEach(((t,e)=>updateMarqueeAnimation(t,e)))}),250)}))}function splitLetters(){document.querySelectorAll(".split-light, .split-dark").forEach((t=>{t.querySelectorAll("span").forEach((t=>{const e=t.textContent.split("");t.innerHTML=e.map((t=>`<span class="char">${t}</span>`)).join("")}))}))}window.addEventListener("load",(()=>{ScrollTrigger.refresh(),lenis.scrollTo(0),lenis.emit(),lenis.resize(),lenis.raf(0),setTimeout((()=>{document.querySelectorAll('a[href^="#"]').forEach((t=>{t.addEventListener("click",(e=>{archorTime=!0,setTimeout((()=>{archorTime=!1}),1e3),e.preventDefault();const i=document.querySelector(t.getAttribute("href"));let s=i.parentNode;if(console.log(s),s.classList.contains("pin-spacer")){const t=s.previousElementSibling,e=t.clientHeight;lenis.scrollTo(t.offsetTop+e,{lerp:.1,duration:2.5})}else lenis.scrollTo(i,{lerp:.1,duration:2.5})}))}))}),500)})),window.addEventListener("resize load",(()=>controller.update(!0))),window.addEventListener("hashchange",(()=>{ScrollTrigger.refresh()})),$(".services-frame .item").on("click",(function(t){$(".services-frame .item").not(this).removeClass("open"),setTimeout((()=>{$(this).addClass("open")}),200)})),$(".faq-frame .item").on("click",(function(t){$(".faq-frame .item").not(this).removeClass("open"),setTimeout((()=>{$(this).addClass("open")}),200)})),document.addEventListener("DOMContentLoaded",(function(){setTimeout(initMarquees,500),initMarquees()})),document.addEventListener("DOMContentLoaded",(()=>{splitLetters();let t="#BEBFC3",e="#8F919A";document.querySelectorAll(".split-light, .split-dark").forEach((i=>{const s=i.querySelectorAll(".char");let n=i.classList.contains("split-light")?t:e;gsap.fromTo(s,{color:n},{color:"#fff",ease:"none",stagger:.05,scrollTrigger:{trigger:i,start:"top 80%",end:"bottom 20%",scrub:!0}})}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll(".item-rotate");if(!t.length)return;window.addEventListener("mousemove",(e=>{const i=window.innerWidth/2,s=15*((e.clientX-i)/i);t.forEach((t=>{gsap.to(t,{rotate:s,duration:.5,ease:"power3.out"})}))})),window.addEventListener("mouseleave",(()=>{t.forEach((t=>{gsap.to(t,{rotate:0,duration:1,ease:"power3.out"})}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("pupil"),e=t.closest("svg");if(!t||!e)return;window.addEventListener("mousemove",(i=>{const s=e.getBoundingClientRect(),n=s.left+s.width/2,o=s.top+s.height/2,a=i.clientX-n,r=i.clientY-o,c=Math.atan2(r,a),l=Math.min(8,Math.hypot(a,r)),h=60+Math.cos(c)*l,d=60+Math.sin(c)*l;gsap.to(t,{attr:{cx:h,cy:d},duration:.2,ease:"power2.out"})})),window.addEventListener("mouseleave",(()=>{gsap.to(t,{attr:{cx:60,cy:60},duration:.3,ease:"power2.out"})}))}));class DotCanvas{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.w=this.canvas.width=this.canvas.offsetWidth,this.h=this.canvas.height=this.canvas.offsetHeight,this.spacing=48,this.dots=[],this.initDots(),this.cursor={x:this.w/2,y:this.h/2,tx:this.w/2,ty:this.h/2,vx:0,vy:0,speed:0},this.setupEventListeners(),this.animate()}initDots(){for(let t=this.spacing/2;t<this.h;t+=this.spacing)for(let e=this.spacing/2;e<this.w;e+=this.spacing)this.dots.push({x:e,y:t,r:2,targetR:2,opacity:.5,targetOpacity:.5})}setupEventListeners(){this.handleMouseMove=t=>{const e=this.canvas.getBoundingClientRect();t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom&&(this.cursor.tx=t.clientX-e.left,this.cursor.ty=t.clientY-e.top)},window.addEventListener("mousemove",this.handleMouseMove),this.handleResize=()=>{this.w=this.canvas.width=this.canvas.offsetWidth,this.h=this.canvas.height=this.canvas.offsetHeight,this.dots=[],this.initDots()},window.addEventListener("resize",this.handleResize)}draw(){this.ctx.clearRect(0,0,this.w,this.h);let t=this.cursor.tx-this.cursor.x,e=this.cursor.ty-this.cursor.y;this.cursor.vx+=.2*t,this.cursor.vy+=.2*e,this.cursor.vx*=.7,this.cursor.vy*=.7,this.cursor.x+=this.cursor.vx,this.cursor.y+=this.cursor.vy,this.cursor.speed=Math.sqrt(this.cursor.vx*this.cursor.vx+this.cursor.vy*this.cursor.vy),this.dots.forEach((t=>{const e=Math.hypot(t.x-this.cursor.x,t.y-this.cursor.y);e<120?(t.targetR=1+(120-e)/50,t.targetOpacity=.5):(t.targetR=.5,t.targetOpacity=0),t.r+=.1*(t.targetR-t.r),t.opacity+=.1*(t.targetOpacity-t.opacity),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,this.ctx.fill()}))}animate(){this.draw(),requestAnimationFrame((()=>this.animate()))}destroy(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize)}}class DotCanvasManager{constructor(){this.canvases=new Map,this.init()}init(){document.querySelectorAll("#dotCanvas, .dotCanvas, canvas[data-dot-canvas]").forEach(((t,e)=>{t.id||(t.id=`dotCanvas-${e}`);const i=new DotCanvas(t);this.canvases.set(t.id,i)}))}getCanvas(t){return this.canvases.get(t)}destroy(){this.canvases.forEach((t=>t.destroy())),this.canvases.clear()}}function addDotCanvas(t){window.dotCanvasManager||(window.dotCanvasManager=new DotCanvasManager);const e=new DotCanvas(t);return window.dotCanvasManager.canvases.set(t.id||`dotCanvas-${Date.now()}`,e),e}document.addEventListener("DOMContentLoaded",(()=>{window.dotCanvasManager=new DotCanvasManager}));const lines=document.querySelectorAll(".line path"),lineAnimations=new Map;function updateLinePath(t,e,i){const s=100,n=500,o=Math.max(0,Math.min(2e3,i)),a=[{x:0,y:s},{x:o-250,y:s},{x:o,y:s+e},{x:o+250,y:s},{x:2e3,y:s}];let r=`M${a[0].x} ${a[0].y}`;r+=` L${a[1].x} ${a[1].y}`,r+=` C${a[1].x+125} ${a[1].y}, \n           ${a[2].x-n/6} ${a[2].y}, \n           ${a[2].x} ${a[2].y}`,r+=` C${a[2].x+n/6} ${a[2].y}, \n           ${a[3].x-125} ${a[3].y}, \n           ${a[3].x} ${a[3].y}`,r+=` L${a[4].x} ${a[4].y}`,t.setAttribute("d",r)}lines.forEach((t=>{lineAnimations.set(t,{depth:0,x:1e3,tween:null})})),document.addEventListener("mousemove",(t=>{lines.forEach((e=>{const i=lineAnimations.get(e),s=e.closest("svg").getBoundingClientRect(),n=s.top+s.height/2,o=Math.abs(t.clientY-n),a=o<80,r=1-Math.pow(o/80,1.5),c=a?Math.max(-80,Math.min(80,(n-t.clientY)*r*2.5)):0,l=2e3/s.width,h=(t.clientX-s.left)*l;i.tween&&i.tween.kill(),i.tween=gsap.to(i,{duration:.4,depth:c,x:h,ease:"power2.out",onUpdate:()=>{updateLinePath(e,i.depth,i.x)}})}))})),document.addEventListener("mouseleave",(()=>{lines.forEach((t=>{const e=lineAnimations.get(t);e.tween&&e.tween.kill(),e.tween=gsap.to(e,{duration:.8,depth:0,x:1e3,ease:"elastic.out(1, 0.4)",onUpdate:()=>{updateLinePath(t,e.depth,e.x)}})}))})),gsap.to(".hero-block .circle-hero",{scale:15,yPercent:-50,xPercent:-70,scrollTrigger:{trigger:".hero-block",start:"top top",end:"+=50%",scrub:1,pin:!0,pinSpacing:!1}});let xcodeContainer=document.querySelector(".xcode-cards"),xcodeItems=gsap.utils.toArray(".xcode-cards .item"),xcodeItemWidth=xcodeItems[0].offsetWidth,xcodeGap=parseFloat(getComputedStyle(xcodeContainer).gap)||0,formula=(xcodeItemWidth+xcodeGap)*(xcodeItems.length-1);const tl=gsap.timeline({scrollTrigger:{trigger:".xcode",start:"+=40%",end:`+=${formula}`,pin:!0,scrub:1}});function setActive(t){xcodeItems.forEach((t=>t.classList.remove("active"))),xcodeItems[t].classList.add("active")}tl.to(".xcode-cards",{x:-formula,ease:"power1.inOut"}),xcodeItems.forEach((t=>t.classList.remove("active"))),xcodeItems[0].classList.add("active"),xcodeItems.forEach(((t,e)=>{ScrollTrigger.create({trigger:".xcode-cards",start:()=>`top+=${e*(xcodeItemWidth+xcodeGap)} center`,end:()=>`top+=${(e+1)*(xcodeItemWidth+xcodeGap)} center`,scrub:!0,onEnter:()=>setActive(e),onEnterBack:()=>setActive(e)})})),window.addEventListener("resize",(()=>{xcodeItemWidth=xcodeItems[0].offsetWidth,xcodeGap=parseFloat(getComputedStyle(xcodeContainer).gap)||0,formula=(xcodeItemWidth+xcodeGap)*(xcodeItems.length-1),ScrollTrigger.refresh()})),gsap.to(".guarantees-circle",{yPercent:-40,scale:16,ease:"power1.inOut",rotate:90,scrollTrigger:{trigger:".guarantees",start:"+=45%",end:"+=200%",scrub:1,pin:!0,pinSpacing:!1}}),gsap.to(".implementation .circle-hero",{scale:15,yPercent:-50,xPercent:-70,scrollTrigger:{trigger:".implementation",start:"top top",end:"+=50%",scrub:1,pin:!0,pinSpacing:!1}}),gsap.set(".feedback-form, .guarantees-section",{yPercent:-85,scale:.3,xPercent:-35}),gsap.to(".guarantees-section",{yPercent:0,xPercent:0,scale:1,ease:"power1.inOut",scrollTrigger:{trigger:".guarantees__wrap",start:"top center",end:"+=70%",scrub:1}}),gsap.to(".feedback-form",{yPercent:0,xPercent:0,scale:1,ease:"power1.inOut",scrollTrigger:{trigger:".feedback-wrap",start:"top center",end:"+=70%",scrub:1}});class AgencyTrail{constructor(t){this.agency=t,this.animationContainer=this.agency.querySelector(".wrap-agency-animation"),this.animationContainer?(this.isValid=!0,this.content=this.animationContainer.querySelector(".content"),this.content||(this.content=this.agency.querySelector(".content")),this.images=Array.from(this.content.querySelectorAll(".content__img")),this.imgInners=Array.from(this.content.querySelectorAll(".content__img-inner")),this.mouse={x:0,y:0},this.lastMouse={x:0,y:0},this.cacheMouse={x:0,y:0},this.zIndex=1,this.activeIndex=0,this.activeImagesCount=0,this.isIdle=!0,this.isPaused=!1,this.activationDistance=80,this.animationRect=this.animationContainer.getBoundingClientRect(),this.activeAnimations=new Map,this.hideAnimation=null,this.init()):this.isValid=!1}init(){this.isValid&&(this.hideAllImages(),this.setupEventListeners(),this.startTracking())}setupEventListeners(){this.isValid&&(this.animationContainer.addEventListener("mousemove",(t=>{this.updateAnimationRect(),this.mouse.x=t.clientX-this.animationRect.left,this.mouse.y=t.clientY-this.animationRect.top})),this.animationContainer.addEventListener("mouseenter",(t=>{this.isPaused=!1,this.updateAnimationRect(),this.mouse.x=t.clientX-this.animationRect.left,this.mouse.y=t.clientY-this.animationRect.top,this.cacheMouse.x=this.mouse.x,this.cacheMouse.y=this.mouse.y,this.lastMouse.x=this.mouse.x,this.lastMouse.y=this.mouse.y,this.hideAnimation&&(this.hideAnimation.kill(),this.hideAnimation=null)})),this.animationContainer.addEventListener("mouseleave",(t=>{this.isCursorInAnimationContainer(t)||(this.isPaused=!0,this.hideAllImagesSmoothly())})),document.addEventListener("mousemove",(t=>{this.isPaused&&this.isCursorInAnimationContainer(t)&&(this.isPaused=!1,this.hideAnimation&&(this.hideAnimation.kill(),this.hideAnimation=null),this.updateAnimationRect(),this.mouse.x=t.clientX-this.animationRect.left,this.mouse.y=t.clientY-this.animationRect.top,this.cacheMouse.x=this.mouse.x,this.cacheMouse.y=this.mouse.y,this.lastMouse.x=this.mouse.x,this.lastMouse.y=this.mouse.y)})),window.addEventListener("resize",(()=>{this.updateAnimationRect()})))}isCursorInAnimationContainer(t){const e=this.animationContainer.getBoundingClientRect();return t.clientX>=e.left-2&&t.clientX<=e.right+2&&t.clientY>=e.top-2&&t.clientY<=e.bottom+2}updateAnimationRect(){this.animationRect=this.animationContainer.getBoundingClientRect()}startTracking(){this.isValid&&gsap.ticker.add((()=>{this.isPaused||(this.cacheMouse.x=this.lerp(this.cacheMouse.x,this.mouse.x,.1),this.cacheMouse.y=this.lerp(this.cacheMouse.y,this.mouse.y,.1),this.checkDistanceAndSpawn())}))}lerp(t,e,i){return t+(e-t)*i}getDistance(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}checkDistanceAndSpawn(){this.getDistance(this.lastMouse,this.mouse)>this.activationDistance&&(this.spawnImage(),this.lastMouse={...this.mouse}),this.isIdle&&1!==this.zIndex&&(this.zIndex=1)}spawnImage(){if(this.isPaused||!this.isValid)return;this.activeImagesCount++,this.isIdle=!1,this.zIndex++,this.activeIndex=this.activeIndex<this.images.length-1?this.activeIndex+1:0;const t=this.images[this.activeIndex],e=this.imgInners[this.activeIndex];this.activeAnimations.has(t)&&this.activeAnimations.get(t).kill();const i=t.getBoundingClientRect();gsap.set(t,{x:this.mouse.x-i.width/2,y:this.mouse.y-i.height/2,scale:0,opacity:1,zIndex:this.zIndex}),gsap.set(e,{scale:2.8,filter:"brightness(150%)"});const s=gsap.timeline({onStart:()=>this.onImageActivate(),onComplete:()=>{this.onImageComplete(),this.activeAnimations.delete(t)}});this.activeAnimations.set(t,s),s.to(t,{duration:.4,ease:"power1.out",scale:1},0).to(e,{duration:.6,ease:"power1.out",scale:1,filter:"brightness(100%)"},0).to(t,{duration:.4,ease:"power2.in",opacity:0,scale:.2},.45)}hideAllImages(){this.isValid&&(this.images.forEach((t=>{gsap.set(t,{opacity:0,scale:.2})})),this.activeAnimations.forEach(((t,e)=>{t.kill()})),this.activeAnimations.clear(),this.hideAnimation&&(this.hideAnimation.kill(),this.hideAnimation=null),this.activeImagesCount=0,this.isIdle=!0,this.zIndex=1)}hideAllImagesSmoothly(){if(!this.isValid)return;this.activeAnimations.forEach(((t,e)=>{t.kill()})),this.activeAnimations.clear(),this.hideAnimation&&this.hideAnimation.kill();const t=this.images.filter((t=>gsap.getProperty(t,"opacity")>0));if(0===t.length)return this.activeImagesCount=0,void(this.isIdle=!0);this.hideAnimation=gsap.timeline({onComplete:()=>{this.activeImagesCount=0,this.isIdle=!0,this.zIndex=1,this.hideAnimation=null}}),t.forEach((t=>{const e=gsap.getProperty(t,"scale");gsap.getProperty(t,"opacity");this.hideAnimation.to(t,{duration:.3,ease:"power2.out",opacity:0,scale:.5*e,overwrite:!0},0)}))}onImageActivate(){this.activeImagesCount++}onImageComplete(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}}class AgencyTrailManager{constructor(){this.agencyTrails=[],this.init()}init(){document.querySelectorAll(".agency").forEach((t=>{if(t.querySelector(".wrap-agency-animation")){const e=new AgencyTrail(t);e.isValid&&this.agencyTrails.push(e)}}))}}document.addEventListener("DOMContentLoaded",(()=>{new AgencyTrailManager})),gsap.to(".hero-block .stoke-title",{opacity:0,scrollTrigger:{trigger:".hero-block__body",start:"top top",end:"+=10%",scrub:1}}),gsap.to(".implementation .stoke-title",{opacity:0,scrollTrigger:{trigger:".implementation__body",start:"top top",end:"+=10%",scrub:1}});class CustomCursor{constructor(){this.cursor=document.querySelector(".cursor"),this.init()}init(){document.body.style.cursor="none",this.cursor.style.opacity="1",this.setupEventListeners()}setupEventListeners(){document.addEventListener("mousemove",(t=>{this.cursor.style.transform=`translate(${t.clientX}px, ${t.clientY}px)`}))}}document.addEventListener("DOMContentLoaded",(()=>{new CustomCursor}));